<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button></ion-back-button>
    </ion-buttons>
    <ion-title>History</ion-title>
    <ion-buttons slot="end">
      <app-logout-button></app-logout-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="ion-padding">
    <h2 class="font-bold">Recent transactions</h2>
  </div>

  <ng-container *ngIf="(displayTransactions| async)?.length; else empty">
    <ion-list lines="full" mode="ios" *ngIf="displayTransactions| async">
      <ion-item *ngFor="let item of displayTransactions| async">
        <ion-icon
          slot="start"
          [name]="(item?.tx?.Account | isMe) ? 'arrow-forward' : 'arrow-back'"
        ></ion-icon>
        <ion-label>
          <ion-text class="font-bold" color="primary">
            <small>
              {{(item?.tx?.Account | isMe) ? 'Sent To' : 'Received From'}}
            </small>
          </ion-text>
          <h2>
            {{(item?.tx?.Account | isMe) ? item?.tx?.Destination :
            item?.tx?.Account}}
          </h2>
          <h6>{{item?.tx?.date | xrpDate}}</h6>
        </ion-label>
        <ion-note slot="end" color="primary">
          <h4 class="font-bold" *ngIf="typeOf(item?.tx?.Amount) === 'string'; else issuedCurrency">
            {{convertdropToxrp(item?.tx?.Amount) | currency: 'XRP'}}
          </h4>
          <ng-template #issuedCurrency>
            <h4 class="font-bold">
              {{item?.tx?.Amount?.value | currency: tokenSymbol }}
            </h4>
          </ng-template>
        </ion-note>
      </ion-item>
    </ion-list>
  </ng-container>

  <ng-template #empty>
    <div class="ion-padding-horizontal ion-text-center">
      <p>Your transactions list is empty</p>
    </div>
  </ng-template>
</ion-content>
